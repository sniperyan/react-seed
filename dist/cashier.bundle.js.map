{"version":3,"sources":["webpack:///cashier.bundle.js","webpack:///./src/modules/cashier/style.less","webpack:///./src/modules/cashier/failure.jsx","webpack:///./src/modules/cashier/index.jsx","webpack:///./src/modules/cashier/style.less?1bf2","webpack:///./src/modules/cashier/success.jsx","webpack:///./src/modules/cashier/home.jsx"],"names":["webpackJsonp","0u8huDBA","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","locals","home","1nGpSJ/k","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_reactRedux","_library","_util","Failure","_Component","this","__proto__","apply","arguments","key","_this2","createElement","View","Header","className","onClick","props","history","go","Title","title","Content","href","JSBridge","orders","Component","connect","Gzmrbgut","_reactRouterDom","_components","_home","_home2","_success","_success2","_failure","_failure2","Routes","_ref","location","Switch","Route","exact","path","component","NoMatch","OCQ/sAO2","content","options","transform","l3OOmnmp","Success","qLW/H28C","axios","_extends2","_extends3","_toConsumableArray2","_toConsumableArray3","_style","_style2","_redux","Home","_this","call","handlePayment","method","state","list","find","item","defaultFlag","actions","openToast","icon","message","type","handleCash","handleCard","handleAlipay","handleWeixin","handleWallet","handleOthers","query","loading","search","decodeQuery","code","price","business","openModal","buttons","text","closeModal","get","params","cache","then","data","lost","onlinePayMethods","filter","Env","is","virtualPayMethods","walletStatus","status","offlinePayMethods","wallet","setState","map","_props","_props2","_ref2","url","_this3","_ref3","WeixinJSBridge","invoke","err_msg","handleFeedback","_this4","password","_state","payment","TIMEOUT_MAX","Math","pow","modal","post","global","finally","closeToast","pattern","placeholder","maxLength","onChange","e","target","pathname","payoff","encodeQuery","_props3","_this5","_state2","_props4","toast","length","width","height","src","alt","Aux","ui-mode","idx","name","Filter","currency","statusTips","desc","checked","handleChange","bind","Footer","disabled","Widgets","Modal","Toast","mapStateToProps","modules","cashier","mapDispatchToProps","dispatch","bindActionCreators"],"mappings":"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","file":"cashier.bundle.js","sourcesContent":["webpackJsonp([\"cashier\"],{\n\n/***/ \"0u8huDBA\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f8GH+\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"._WnihOna .item.disabled img{-webkit-filter:grayscale(100%);filter:grayscale(100%)}._WnihOna .list.wallet{margin:0 -15px -16px}\", \"\", {\"version\":3,\"sources\":[\"/Users/smilelegend/workstation/exui-react/src/modules/cashier/style.less\",\"/Users/smilelegend/workstation/exui-react/style.less\"],\"names\":[],\"mappings\":\"AAEA,6BAGM,+BAAA,sBAAA,CCHL,ADAD,uBASI,oBAAA,CCNH\",\"file\":\"style.less\",\"sourcesContent\":[\"@import \\\"../../less/base/fn.less\\\";\\n\\n:local(.home) {\\n  .item.disabled {\\n    img {\\n      filter: grayscale(100%);\\n    }\\n\\n  }\\n\\n  .list.wallet {\\n    margin: 0 -15px -16px;\\n  }\\n\\n}\\n\",\":local(.home) .item.disabled img {\\n  filter: grayscale(100%);\\n}\\n:local(.home) .list.wallet {\\n  margin: 0 -15px -16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"home\": \"_WnihOna\"\n};\n\n/***/ }),\n\n/***/ \"1nGpSJ/k\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(\"Zx67aMzV\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"ZrlrdyRl\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAWXU5K\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"zwoOJdCg\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"Pf15lzEx\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(\"GiK3r5kD\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(\"RH2OZSPu\");\n\nvar _library = __webpack_require__(\"pAQWTaDD\");\n\nvar _util = __webpack_require__(\"6KlIuleq\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Failure = function (_Component) {\n  (0, _inherits3.default)(Failure, _Component);\n\n  function Failure() {\n    (0, _classCallCheck3.default)(this, Failure);\n    return (0, _possibleConstructorReturn3.default)(this, (Failure.__proto__ || (0, _getPrototypeOf2.default)(Failure)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Failure, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        _library.View,\n        null,\n        _react2.default.createElement(\n          _library.Header,\n          null,\n          _react2.default.createElement(\n            'a',\n            { className: 'menu', onClick: function onClick() {\n                return _this2.props.history.go(-1);\n              } },\n            _react2.default.createElement(\n              'i',\n              { className: 'icon' },\n              '\\uE60E'\n            )\n          ),\n          _react2.default.createElement(_library.Title, { title: '\\u652F\\u4ED8\\u5931\\u8D25' })\n        ),\n        _react2.default.createElement(\n          _library.Content,\n          null,\n          _react2.default.createElement(\n            'div',\n            { className: 'feedback compact' },\n            _react2.default.createElement(\n              'div',\n              { className: 'mark' },\n              _react2.default.createElement(\n                'i',\n                { className: 'icon text-warning' },\n                '\\uE6A0'\n              )\n            ),\n            _react2.default.createElement(\n              'h3',\n              { className: 'title' },\n              '\\u652F\\u4ED8\\u5931\\u8D25'\n            ),\n            _react2.default.createElement(\n              'p',\n              { className: 'describe' },\n              '\\u975E\\u5E38\\u62B1\\u6B49\\uFF0C\\u60A8\\u53EF\\u4EE5\\u8FD4\\u56DE\\u8BA2\\u5355\\u5C1D\\u8BD5\\u91CD\\u65B0\\u53D1\\u8D77\\u652F\\u4ED8',\n              _react2.default.createElement('br', null),\n              '\\u60A8\\u4E5F\\u53EF\\u4EE5\\u81F4\\u7535 ',\n              _react2.default.createElement(\n                'a',\n                { className: 'link', href: 'tel:4000818181' },\n                '4000818181'\n              ),\n              ' \\u54A8\\u8BE2'\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'vspace hspace' },\n              _react2.default.createElement(\n                'button',\n                { className: 'button plain-warning', onClick: function onClick() {\n                    return _this2.props.history.go(-1);\n                  } },\n                '\\u91CD\\u65B0\\u652F\\u4ED8'\n              ),\n              _react2.default.createElement(\n                'button',\n                { className: 'button default', onClick: function onClick() {\n                    return _util.JSBridge.orders();\n                  } },\n                '\\u67E5\\u770B\\u8BA2\\u5355'\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n  return Failure;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)()(Failure);\n\n/***/ }),\n\n/***/ \"Gzmrbgut\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__webpack_require__(\"OCQ/sAO2\");\n\nvar _react = __webpack_require__(\"GiK3r5kD\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRouterDom = __webpack_require__(\"F8kArY4h\");\n\nvar _components = __webpack_require__(\"1Ss0+nTi\");\n\nvar _home = __webpack_require__(\"qLW/H28C\");\n\nvar _home2 = _interopRequireDefault(_home);\n\nvar _success = __webpack_require__(\"l3OOmnmp\");\n\nvar _success2 = _interopRequireDefault(_success);\n\nvar _failure = __webpack_require__(\"1nGpSJ/k\");\n\nvar _failure2 = _interopRequireDefault(_failure);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 将路由打包 (以便做代码分割 实现异步加载)\nvar Routes = function Routes(_ref) {\n  var location = _ref.location;\n  return _react2.default.createElement(\n    _reactRouterDom.Switch,\n    { location: location },\n    _react2.default.createElement(_reactRouterDom.Route, { exact: true, path: '/cashier/payment', component: _home2.default }),\n    _react2.default.createElement(_reactRouterDom.Route, { exact: true, path: '/cashier/success', component: _success2.default }),\n    _react2.default.createElement(_reactRouterDom.Route, { exact: true, path: '/cashier/failure', component: _failure2.default }),\n    _react2.default.createElement(_reactRouterDom.Route, { component: _components.NoMatch })\n  );\n};\n\nexports.default = Routes;\n\n/***/ }),\n\n/***/ \"OCQ/sAO2\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"0u8huDBA\");\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(\"MTIv0jEu\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--0-2!../../../node_modules/postcss-loader/lib/index.js??ref--0-3!../../../node_modules/less-loader/dist/cjs.js??ref--0-4!./style.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--0-2!../../../node_modules/postcss-loader/lib/index.js??ref--0-3!../../../node_modules/less-loader/dist/cjs.js??ref--0-4!./style.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ \"l3OOmnmp\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(\"Zx67aMzV\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"ZrlrdyRl\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAWXU5K\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"zwoOJdCg\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"Pf15lzEx\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(\"GiK3r5kD\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(\"RH2OZSPu\");\n\nvar _library = __webpack_require__(\"pAQWTaDD\");\n\nvar _util = __webpack_require__(\"6KlIuleq\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Success = function (_Component) {\n  (0, _inherits3.default)(Success, _Component);\n\n  function Success() {\n    (0, _classCallCheck3.default)(this, Success);\n    return (0, _possibleConstructorReturn3.default)(this, (Success.__proto__ || (0, _getPrototypeOf2.default)(Success)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Success, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        _library.View,\n        null,\n        _react2.default.createElement(\n          _library.Header,\n          null,\n          _react2.default.createElement(\n            'a',\n            { className: 'menu', onClick: function onClick() {\n                return _this2.props.history.go(-1);\n              } },\n            _react2.default.createElement(\n              'i',\n              { className: 'icon' },\n              '\\uE60E'\n            )\n          ),\n          _react2.default.createElement(_library.Title, { title: '\\u652F\\u4ED8\\u6210\\u529F' })\n        ),\n        _react2.default.createElement(\n          _library.Content,\n          null,\n          _react2.default.createElement(\n            'div',\n            { className: 'feedback compact' },\n            _react2.default.createElement(\n              'div',\n              { className: 'mark' },\n              _react2.default.createElement(\n                'i',\n                { className: 'icon text-success' },\n                '\\uE696'\n              )\n            ),\n            _react2.default.createElement(\n              'h3',\n              { className: 'title' },\n              '\\u652F\\u4ED8\\u6210\\u529F'\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'describe' },\n              '\\u5982\\u6709\\u7591\\u95EE\\uFF0C\\u60A8\\u53EF\\u4EE5\\u81F4\\u7535 ',\n              _react2.default.createElement(\n                'a',\n                { className: 'link', href: 'tel:4000818181' },\n                '4000818181'\n              ),\n              ' \\u54A8\\u8BE2'\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'vspace hspace' },\n              _react2.default.createElement(\n                'button',\n                { className: 'button plain-success', onClick: function onClick() {\n                    return _util.JSBridge.orders();\n                  } },\n                '\\u67E5\\u770B\\u8BA2\\u5355'\n              )\n            )\n          )\n        )\n      );\n    }\n  }]);\n  return Success;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)()(Success);\n\n/***/ }),\n\n/***/ \"qLW/H28C\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(axios) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = __webpack_require__(\"Dd8wAUAV\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _toConsumableArray2 = __webpack_require__(\"Gu7Tm2+A\");\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _getPrototypeOf = __webpack_require__(\"Zx67aMzV\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"ZrlrdyRl\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"wxAWXU5K\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"zwoOJdCg\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"Pf15lzEx\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _style = __webpack_require__(\"OCQ/sAO2\");\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _react = __webpack_require__(\"GiK3r5kD\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _redux = __webpack_require__(\"2KeSMhYv\");\n\nvar _reactRedux = __webpack_require__(\"RH2OZSPu\");\n\nvar _home = __webpack_require__(\"NE60SXLQ\");\n\nvar _library = __webpack_require__(\"pAQWTaDD\");\n\nvar _util = __webpack_require__(\"6KlIuleq\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Home = function (_Component) {\n  (0, _inherits3.default)(Home, _Component);\n\n  function Home(props) {\n    (0, _classCallCheck3.default)(this, Home);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Home.__proto__ || (0, _getPrototypeOf2.default)(Home)).call(this, props));\n\n    _this.handlePayment = function () {\n      var method = _this.state.list.find(function (item) {\n        return item.defaultFlag === 1;\n      });\n      if (!method) {\n        return _this.props.actions.openToast({\n          icon: 'failure',\n          message: '请选支付方式'\n        });\n      }\n\n      // 现金支付\n      if (method.type === 11) {\n        _this.handleCash(method);\n      }\n      // 刷卡支付\n      else if (method.type === 21) {\n          _this.handleCard(method);\n        }\n        // 支付宝\n        else if (method.type === 31) {\n            _this.handleAlipay(method);\n          }\n          // 微信支付\n          else if (method.type === 51) {\n              _this.handleWeixin(method);\n            }\n            // 钱包支付\n            else if (method.type === 61) {\n                _this.handleWallet(method);\n              }\n              // 其他方案\n              else {\n                  _this.handleOthers(method);\n                }\n    };\n\n    _this.state = {\n      list: [],\n      query: {},\n      loading: true\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Home, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var actions = this.props.actions;\n      var search = this.props.location.search;\n\n      var query = (0, _util.decodeQuery)(search);\n\n      // 参数检查\n      if (!query.code || !query.price || !query.business) {\n        return actions.openModal({\n          title: '数据异常',\n          message: '缺少必要的支付参数，无法支付',\n          buttons: [{\n            text: '关闭',\n            onClick: actions.closeModal\n          }]\n        });\n      }\n\n      axios.get('/cashier/ajax/method', {\n        params: query,\n        cache: true\n      }).then(function (_ref) {\n        var data = _ref.data;\n\n        // 是否丢失默认支付 (钱包被禁用,微信支付不可用等)\n        var lost = false;\n\n        // 过滤在线支付\n        data.onlinePayMethods = data.onlinePayMethods.filter(function (item) {\n          // 支付宝支付 微信平台不能显示\n          if (item.type === 31 && _util.Env.is('wx')) {\n            lost = item.defaultFlag === 1 || lost;\n            return false;\n          }\n          // 微信支付 非微信平台不显示\n          else if (item.type === 51 && !_util.Env.is('wx')) {\n              lost = item.defaultFlag === 1 || lost;\n              return false;\n            }\n          return true;\n        });\n\n        // 过滤虚拟支付\n        data.virtualPayMethods = data.virtualPayMethods.filter(function (item) {\n          // H5不支持亲情付\n          if (item.type !== 61) {\n            lost = item.defaultFlag === 1 || lost;\n            return false;\n          }\n          // 钱包支付可能被禁用\n          else if (data.walletStatus.status === 0) {\n              lost = item.defaultFlag === 1 || lost;\n              item.defaultFlag = 0;\n              return true;\n            }\n          return true;\n        });\n\n        // 将所有支付方式合并在一起: 在线支付, 虚拟支付, 离线支付\n        var list = [].concat((0, _toConsumableArray3.default)(data.onlinePayMethods), (0, _toConsumableArray3.default)(data.virtualPayMethods), (0, _toConsumableArray3.default)(data.offlinePayMethods));\n        var wallet = data.walletStatus;\n\n        // 防止缺失默认支付方式\n        if (lost) {\n          // 钱包可能被冻结 所以不能直接取\n          var method = list.find(function (item) {\n            return item.type !== 61 || wallet.status !== 0;\n          });\n          if (method) {\n            method.defaultFlag = 1;\n            lost = false;\n          }\n        }\n\n        _this2.setState({\n          list: list,\n          wallet: wallet,\n          query: query,\n          lost: lost,\n          loading: false\n        });\n      });\n    }\n\n    // 更改支付方式\n\n  }, {\n    key: 'handleChange',\n    value: function handleChange(method) {\n      this.setState({\n        list: this.state.list.map(function (item) {\n          item.defaultFlag = item === method ? 1 : 0;\n          return item;\n        })\n      });\n    }\n\n    // 支付执行入口\n\n  }, {\n    key: 'handleCash',\n\n\n    // 现金支付\n    value: function handleCash() {\n      var _props = this.props,\n          actions = _props.actions,\n          history = _props.history;\n\n      actions.openModal({\n        title: '现金支付',\n        message: '您需要前往物业中心现金支付',\n        buttons: [{\n          text: '其他方式',\n          onClick: actions.closeModal\n        }, {\n          text: '查看订单',\n          onClick: function onClick() {\n            actions.closeModal();\n            history.push('/account/orders');\n          }\n        }]\n      });\n    }\n\n    // 刷卡支付\n\n  }, {\n    key: 'handleCard',\n    value: function handleCard() {\n      var _props2 = this.props,\n          actions = _props2.actions,\n          history = _props2.history;\n\n      actions.openModal({\n        title: '刷卡支付',\n        message: '您需要前往物业中心刷卡支付',\n        buttons: [{\n          text: '其他方式',\n          onClick: actions.closeModal\n        }, {\n          text: '查看订单',\n          onClick: function onClick() {\n            actions.closeModal();\n            history.push('/account/orders');\n          }\n        }]\n      });\n    }\n\n    // 支付宝\n\n  }, {\n    key: 'handleAlipay',\n    value: function handleAlipay() {\n      axios.get('/cashier/ajax/alipay', {\n        params: {\n          code: this.state.query.code\n        }\n      }).then(function (_ref2) {\n        var data = _ref2.data;\n\n        // 跳转到支付宝H5付款链接\n        location.href = data.url;\n      });\n    }\n\n    // 微信支付\n\n  }, {\n    key: 'handleWeixin',\n    value: function handleWeixin() {\n      var _this3 = this;\n\n      axios.get('/cashier/ajax/weixin', {\n        params: {\n          code: this.state.query.code\n        }\n      }).then(function (_ref3) {\n        var data = _ref3.data;\n\n        WeixinJSBridge.invoke('getBrandWCPayRequest', data, function (status) {\n          if (status.err_msg === 'get_brand_wcpay_request:ok') {\n            _this3.handleFeedback('success');\n          } else {\n            _this3.handleFeedback('failure');\n          }\n        });\n      });\n    }\n\n    // 钱包支付\n\n  }, {\n    key: 'handleWallet',\n    value: function handleWallet() {\n      var _this4 = this;\n\n      var password = null;\n      var actions = this.props.actions;\n      var _state = this.state,\n          query = _state.query,\n          wallet = _state.wallet;\n\n      // 调用支付\n\n      var payment = function payment() {\n        // CLOSE GLOBAL, SO SELF HANDLE TOAST LOADING\n        var TIMEOUT_MAX = Math.pow(2, 31) - 1;\n        actions.openToast({ icon: 'loading', modal: true }, TIMEOUT_MAX);\n        axios.post('/cashier/ajax/wallet', {\n          code: query.code,\n          password: password\n        }, {\n          // 支付失败不希望触发全局的弹窗提醒\n          global: false\n        }).then(function () {\n          _this4.handleFeedback('success');\n        }, function () {\n          _this4.handleFeedback('failure');\n        }).finally(actions.closeToast);\n      };\n\n      // 被冻结\n      if (wallet.status == 0) {\n        return actions.openToast({\n          icon: 'failure',\n          message: '账户已被冻结'\n        });\n      }\n      // 有密码\n      else if (wallet.status == 1) {\n          actions.openModal({\n            title: '请输入支付密码',\n            message: _react2.default.createElement(\n              'div',\n              { className: 'list compact wallet' },\n              _react2.default.createElement(\n                'label',\n                { className: 'item' },\n                _react2.default.createElement(\n                  'span',\n                  { className: 'label' },\n                  '\\u5BC6\\u7801'\n                ),\n                _react2.default.createElement(\n                  'div',\n                  { className: 'text' },\n                  _react2.default.createElement('input', { className: 'input', type: 'password', pattern: '[0-9]*', placeholder: '\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u652F\\u4ED8\\u5BC6\\u7801', maxLength: '6', onChange: function onChange(e) {\n                      return password = e.target.value;\n                    } })\n                )\n              ),\n              _react2.default.createElement(\n                'div',\n                { className: 'item-divider' },\n                _react2.default.createElement(\n                  'div',\n                  { className: 'text text-center text-driving' },\n                  '\\u63D0\\u9192: \\u60A8\\u6B63\\u5728\\u8FDB\\u884C\\u4ED8\\u6B3E\\u64CD\\u4F5C'\n                )\n              )\n            ),\n            buttons: [{\n              text: '取消',\n              onClick: actions.closeModal\n            }, {\n              text: '确定',\n              onClick: function onClick() {\n                // 空密码\n                if (!password) {\n                  return actions.openToast({\n                    icon: 'failure',\n                    message: '请输入密码'\n                  });\n                }\n                payment();\n                actions.closeModal();\n              }\n            }]\n          });\n        }\n        // 没密码\n        else if (wallet.status == 2) {\n            payment();\n          }\n    }\n\n    // 支付回调处理\n\n  }, {\n    key: 'handleFeedback',\n    value: function handleFeedback(type) {\n      var query = this.state.query;\n      var history = this.props.history;\n\n      history.push({\n        pathname: (0, _util.payoff)(query.business, type),\n        search: (0, _util.encodeQuery)(query)\n      });\n    }\n\n    // 物业交费\n\n  }, {\n    key: 'handleOthers',\n    value: function handleOthers() {\n      var _props3 = this.props,\n          actions = _props3.actions,\n          history = _props3.history;\n\n      actions.openModal({\n        title: '物业前台',\n        message: '您需要前往物业中心当面支付',\n        buttons: [{\n          text: '其他方式',\n          onClick: actions.closeModal\n        }, {\n          text: '查看订单',\n          onClick: function onClick() {\n            actions.closeModal();\n            history.push('/account/orders');\n          }\n        }]\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var _state2 = this.state,\n          loading = _state2.loading,\n          list = _state2.list,\n          wallet = _state2.wallet,\n          query = _state2.query,\n          lost = _state2.lost;\n      var price = query.price;\n      var _props4 = this.props,\n          toast = _props4.toast,\n          modal = _props4.modal;\n\n      return _react2.default.createElement(\n        _library.View,\n        { className: _style2.default.home },\n        _react2.default.createElement(\n          _library.Header,\n          null,\n          _react2.default.createElement(\n            'a',\n            { className: 'menu', onClick: function onClick() {\n                return _this5.props.history.go(-1);\n              } },\n            _react2.default.createElement(\n              'i',\n              { className: 'icon' },\n              '\\uE60E'\n            )\n          ),\n          _react2.default.createElement(_library.Title, { title: '\\u6536\\u94F6\\u53F0' })\n        ),\n        _react2.default.createElement(\n          _library.Content,\n          null,\n          !loading && list.length === 0 && _react2.default.createElement(\n            'div',\n            { className: 'feedback' },\n            _react2.default.createElement(\n              'div',\n              { className: 'mark' },\n              _react2.default.createElement('img', { width: '197', height: '98', src: '//img1.qdingnet.com/c50aee1127e2b6a075250a6b26629bd2.png', alt: '\\u7A7A\\u767D' })\n            ),\n            _react2.default.createElement(\n              'h3',\n              { className: 'title' },\n              '\\u975E\\u5E38\\u62B1\\u6B49'\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'describe' },\n              '\\u60A8\\u5F53\\u524D\\u6D4F\\u89C8\\u5668\\u4E0D\\u652F\\u6301\\u652F\\u4ED8',\n              _react2.default.createElement('br', null),\n              '\\u4F60\\u53EF\\u4EE5\\u4F7F\\u7528\\u5FAE\\u4FE1\\u6216\\u5343\\u4E01APP\\u8BBF\\u95EE'\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'vspace hspace' },\n              _react2.default.createElement(\n                'a',\n                { className: 'button default', href: '//dl.qdingnet.com' },\n                '\\u4E0B\\u8F7D\\u5343\\u4E01\\u5C0F\\u533A'\n              )\n            )\n          ),\n          list.length > 0 && _react2.default.createElement(\n            _library.Aux,\n            null,\n            _react2.default.createElement(\n              'div',\n              { className: 'hspace text-sm', 'ui-mode': '15px' },\n              _react2.default.createElement(\n                'div',\n                { className: 'vspace', 'ui-mode': '10px' },\n                '\\u8BF7\\u9009\\u62E9\\u652F\\u4ED8\\u65B9\\u5F0F'\n              )\n            ),\n            list.map(function (item, idx) {\n              return _react2.default.createElement(\n                'div',\n                { key: idx, className: 'list' },\n                item.type === 61 && wallet.status == 0 && _react2.default.createElement(\n                  'label',\n                  { className: 'item disabled', 'ui-mode': '15px' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'avatar' },\n                    _react2.default.createElement('img', { width: '45', height: '45', src: item.icon })\n                  ),\n                  _react2.default.createElement(\n                    'span',\n                    { className: 'text' },\n                    _react2.default.createElement(\n                      'span',\n                      { className: 'text-darkgray' },\n                      item.name,\n                      _react2.default.createElement(\n                        'span',\n                        { className: 'text-gray text-sm' },\n                        '\\uFF08\\u4F59\\u989D: ',\n                        _util.Filter.currency(item.value),\n                        '\\uFF09'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'div',\n                      { className: 'brief text-ellipsis' },\n                      _react2.default.createElement(\n                        'span',\n                        { className: 'text-gray' },\n                        wallet.statusTips || '提醒：钱包已被冻结，请联系客服'\n                      )\n                    )\n                  )\n                ),\n                item.type === 61 && wallet.status == 1 && _react2.default.createElement(\n                  'label',\n                  { className: 'item tapable forlab', 'ui-mode': '15px' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'avatar' },\n                    _react2.default.createElement('img', { width: '45', height: '45', src: item.icon })\n                  ),\n                  _react2.default.createElement(\n                    'span',\n                    { className: 'text' },\n                    _react2.default.createElement(\n                      'span',\n                      null,\n                      item.name,\n                      _react2.default.createElement(\n                        'span',\n                        { className: 'text-driving text-sm' },\n                        '\\uFF08\\u4F59\\u989D: ',\n                        _util.Filter.currency(item.value),\n                        '\\uFF09'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'div',\n                      { className: 'brief text-ellipsis' },\n                      item.desc\n                    )\n                  ),\n                  _react2.default.createElement('input', { className: 'checkbox', type: 'radio', name: 'paytype', checked: item.defaultFlag, onChange: _this5.handleChange.bind(_this5, item) })\n                ),\n                item.type !== 61 && _react2.default.createElement(\n                  'label',\n                  { className: 'item tapable forlab', 'ui-mode': '15px' },\n                  _react2.default.createElement(\n                    'div',\n                    { className: 'avatar' },\n                    _react2.default.createElement('img', { width: '45', height: '45', src: item.icon })\n                  ),\n                  _react2.default.createElement(\n                    'span',\n                    { className: 'text' },\n                    _react2.default.createElement(\n                      'span',\n                      null,\n                      item.name\n                    ),\n                    _react2.default.createElement(\n                      'div',\n                      { className: 'brief text-ellipsis' },\n                      item.desc\n                    )\n                  ),\n                  _react2.default.createElement('input', { className: 'checkbox', type: 'radio', name: 'paytype', checked: item.defaultFlag, onChange: _this5.handleChange.bind(_this5, item) })\n                )\n              );\n            })\n          )\n        ),\n        list.length > 0 && _react2.default.createElement(\n          _library.Footer,\n          null,\n          _react2.default.createElement(\n            'div',\n            { className: 'button-group compact' },\n            _react2.default.createElement(\n              'button',\n              { className: 'button literal square text-left' },\n              '\\u5E94\\u4ED8: ',\n              _react2.default.createElement(\n                'span',\n                { className: 'text-driving' },\n                _util.Filter.currency(price)\n              )\n            ),\n            _react2.default.createElement(\n              'button',\n              { className: 'button driving square', disabled: lost, onClick: this.handlePayment },\n              '\\u7ACB\\u5373\\u652F\\u4ED8'\n            )\n          )\n        ),\n        _react2.default.createElement(\n          _library.Widgets,\n          null,\n          _react2.default.createElement(_library.Modal, modal),\n          _react2.default.createElement(_library.Toast, toast)\n        )\n      );\n    }\n  }]);\n  return Home;\n}(_react.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return (0, _extends3.default)({}, state.modules.cashier.home);\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    actions: (0, _redux.bindActionCreators)(_home.actions, dispatch)\n  };\n};\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Home);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"mtWMgkpO\")))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// cashier.bundle.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"._WnihOna .item.disabled img{-webkit-filter:grayscale(100%);filter:grayscale(100%)}._WnihOna .list.wallet{margin:0 -15px -16px}\", \"\", {\"version\":3,\"sources\":[\"/Users/smilelegend/workstation/exui-react/src/modules/cashier/style.less\",\"/Users/smilelegend/workstation/exui-react/style.less\"],\"names\":[],\"mappings\":\"AAEA,6BAGM,+BAAA,sBAAA,CCHL,ADAD,uBASI,oBAAA,CCNH\",\"file\":\"style.less\",\"sourcesContent\":[\"@import \\\"../../less/base/fn.less\\\";\\n\\n:local(.home) {\\n  .item.disabled {\\n    img {\\n      filter: grayscale(100%);\\n    }\\n\\n  }\\n\\n  .list.wallet {\\n    margin: 0 -15px -16px;\\n  }\\n\\n}\\n\",\":local(.home) .item.disabled img {\\n  filter: grayscale(100%);\\n}\\n:local(.home) .list.wallet {\\n  margin: 0 -15px -16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"home\": \"_WnihOna\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true,\"minimize\":true,\"localIdentName\":\"[hash:base64:8]\"}!./node_modules/postcss-loader/lib?{\"sourceMap\":true}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./src/modules/cashier/style.less\n// module id = 0u8huDBA\n// module chunks = cashier","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { View, Header, Title, Content } from 'library';\nimport { JSBridge } from 'library/util';\n\nclass Failure extends Component {\n\n  render() {\n    return (\n      <View>\n        <Header>\n          <a className=\"menu\" onClick={() => this.props.history.go(-1)}>\n            <i className=\"icon\">&#xe60e;</i>\n          </a>\n          <Title title=\"支付失败\" />\n        </Header>\n\n        <Content>\n          <div className=\"feedback compact\">\n            <div className=\"mark\">\n              <i className=\"icon text-warning\">&#xe6a0;</i>\n            </div>\n            <h3 className=\"title\">支付失败</h3>\n            <p className=\"describe\">\n              非常抱歉，您可以返回订单尝试重新发起支付<br />\n              您也可以致电 <a className=\"link\" href=\"tel:4000818181\">4000818181</a> 咨询\n            </p>\n\n            <div className=\"vspace hspace\">\n              <button className=\"button plain-warning\" onClick={() => this.props.history.go(-1)}>重新支付</button>\n              <button className=\"button default\" onClick={()=> JSBridge.orders()}>查看订单</button>\n            </div>\n          </div>\n        </Content>\n      </View>\n    );\n  }\n}\n\nexport default connect()(Failure);\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cashier/failure.jsx","import './style.less';\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { NoMatch } from '../../components';\nimport Home from './home';\nimport Success from './success';\nimport Failure from './failure';\n\n// 将路由打包 (以便做代码分割 实现异步加载)\nconst Routes = ({ location }) => (\n  <Switch location={location}>\n    <Route exact path=\"/cashier/payment\" component={Home} />\n    <Route exact path=\"/cashier/success\" component={Success} />\n    <Route exact path=\"/cashier/failure\" component={Failure} />\n    <Route component={NoMatch} />\n  </Switch>\n);\n\nexport default Routes;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cashier/index.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--0-2!../../../node_modules/postcss-loader/lib/index.js??ref--0-3!../../../node_modules/less-loader/dist/cjs.js??ref--0-4!./style.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--0-2!../../../node_modules/postcss-loader/lib/index.js??ref--0-3!../../../node_modules/less-loader/dist/cjs.js??ref--0-4!./style.less\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--0-2!../../../node_modules/postcss-loader/lib/index.js??ref--0-3!../../../node_modules/less-loader/dist/cjs.js??ref--0-4!./style.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/cashier/style.less\n// module id = OCQ/sAO2\n// module chunks = cashier","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { View, Header, Title, Content } from 'library';\nimport { JSBridge } from 'library/util';\n\nclass Success extends Component {\n\n  render() {\n    return (\n      <View>\n        <Header>\n          <a className=\"menu\" onClick={() => this.props.history.go(-1)}>\n            <i className=\"icon\">&#xe60e;</i>\n          </a>\n          <Title title=\"支付成功\" />\n        </Header>\n\n        <Content>\n          <div className=\"feedback compact\">\n            <div className=\"mark\">\n              <i className=\"icon text-success\">&#xe696;</i>\n            </div>\n            <h3 className=\"title\">支付成功</h3>\n            <div className=\"describe\">如有疑问，您可以致电 <a className=\"link\" href=\"tel:4000818181\">4000818181</a> 咨询</div>\n\n            <div className=\"vspace hspace\">\n              <button className=\"button plain-success\" onClick={()=> JSBridge.orders()}>查看订单</button>\n            </div>\n          </div>\n        </Content>\n      </View>\n    );\n  }\n}\n\nexport default connect()(Success);\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cashier/success.jsx","import style from './style.less';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { actions } from './ducks/home';\nimport { View, Header, Footer, Title, Content, Toast, Modal, Aux, Widgets } from 'library';\nimport { Env, Filter, payoff, decodeQuery, encodeQuery } from 'library/util';\n\nclass Home extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      query: {},\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    const { actions } = this.props;\n    const { search } = this.props.location;\n    const query = decodeQuery(search);\n\n    // 参数检查\n    if (!query.code || !query.price || !query.business) {\n      return actions.openModal({\n        title: '数据异常',\n        message: '缺少必要的支付参数，无法支付',\n        buttons: [{\n          text: '关闭',\n          onClick: actions.closeModal,\n        }],\n      });\n    }\n\n    axios.get('/cashier/ajax/method', {\n      params: query,\n      cache: true,\n    }).then(({ data }) => {\n      // 是否丢失默认支付 (钱包被禁用,微信支付不可用等)\n      let lost = false;\n\n      // 过滤在线支付\n      data.onlinePayMethods = data.onlinePayMethods.filter(item => {\n        // 支付宝支付 微信平台不能显示\n        if (item.type === 31 && Env.is('wx')) {\n          lost = item.defaultFlag === 1 || lost;\n          return false;\n        }\n        // 微信支付 非微信平台不显示\n        else if (item.type === 51 && !Env.is('wx')) {\n          lost = item.defaultFlag === 1 || lost;\n          return false;\n        }\n        return true;\n      });\n\n      // 过滤虚拟支付\n      data.virtualPayMethods = data.virtualPayMethods.filter(item => {\n        // H5不支持亲情付\n        if (item.type !== 61) {\n          lost = item.defaultFlag === 1 || lost;\n          return false;\n        }\n        // 钱包支付可能被禁用\n        else if (data.walletStatus.status === 0) {\n          lost = item.defaultFlag === 1 || lost;\n          item.defaultFlag = 0;\n          return true;\n        }\n        return true;\n      });\n\n      // 将所有支付方式合并在一起: 在线支付, 虚拟支付, 离线支付\n      let list = [...data.onlinePayMethods, ...data.virtualPayMethods, ...data.offlinePayMethods];\n      let wallet = data.walletStatus;\n\n      // 防止缺失默认支付方式\n      if (lost) {\n        // 钱包可能被冻结 所以不能直接取\n        let method = list.find(item => item.type !== 61 || wallet.status !== 0);\n        if (method) {\n          method.defaultFlag = 1;\n          lost = false;\n        }\n      }\n\n      this.setState({\n        list,\n        wallet,\n        query,\n        lost,\n        loading: false,\n      });\n    });\n  }\n\n  // 更改支付方式\n  handleChange(method) {\n    this.setState({\n      list: this.state.list.map(item => {\n        item.defaultFlag = item === method ? 1 : 0;\n        return item;\n      }),\n    });\n  }\n\n  // 支付执行入口\n  handlePayment = () => {\n    let method = this.state.list.find(item => item.defaultFlag === 1);\n    if (!method) {\n      return this.props.actions.openToast({\n        icon: 'failure',\n        message: '请选支付方式',\n      });\n    }\n\n    // 现金支付\n    if (method.type === 11) {\n      this.handleCash(method);\n    }\n    // 刷卡支付\n    else if (method.type === 21) {\n      this.handleCard(method);\n    }\n    // 支付宝\n    else if (method.type === 31) {\n      this.handleAlipay(method);\n    }\n    // 微信支付\n    else if (method.type === 51) {\n      this.handleWeixin(method);\n    }\n    // 钱包支付\n    else if (method.type === 61) {\n      this.handleWallet(method);\n    }\n    // 其他方案\n    else {\n      this.handleOthers(method);\n    }\n  }\n\n  // 现金支付\n  handleCash() {\n    let { actions, history } = this.props;\n    actions.openModal({\n      title: '现金支付',\n      message: '您需要前往物业中心现金支付',\n      buttons: [{\n        text: '其他方式',\n        onClick: actions.closeModal,\n      }, {\n        text: '查看订单',\n        onClick: () => {\n          actions.closeModal();\n          history.push('/account/orders');\n        },\n      }]\n    });\n  }\n\n  // 刷卡支付\n  handleCard() {\n    let { actions, history } = this.props;\n    actions.openModal({\n      title: '刷卡支付',\n      message: '您需要前往物业中心刷卡支付',\n      buttons: [{\n        text: '其他方式',\n        onClick: actions.closeModal,\n      }, {\n        text: '查看订单',\n        onClick: () => {\n          actions.closeModal();\n          history.push('/account/orders');\n        },\n      }]\n    });\n  }\n\n  // 支付宝\n  handleAlipay() {\n    axios.get('/cashier/ajax/alipay', {\n      params: {\n        code: this.state.query.code,\n      },\n    }).then(({ data }) => {\n      // 跳转到支付宝H5付款链接\n      location.href = data.url;\n    });\n  }\n\n  // 微信支付\n  handleWeixin() {\n    axios.get('/cashier/ajax/weixin', {\n      params: {\n        code: this.state.query.code,\n      },\n    }).then(({ data }) => {\n      WeixinJSBridge.invoke('getBrandWCPayRequest', data, (status) => {\n        if (status.err_msg === 'get_brand_wcpay_request:ok') {\n          this.handleFeedback('success');\n        } else {\n          this.handleFeedback('failure');\n        }\n      });\n    });\n  }\n\n  // 钱包支付\n  handleWallet() {\n    let password = null;\n    let { actions } = this.props;\n    let { query, wallet } = this.state;\n\n    // 调用支付\n    let payment = () => {\n      // CLOSE GLOBAL, SO SELF HANDLE TOAST LOADING\n      const TIMEOUT_MAX = Math.pow(2, 31) - 1;\n      actions.openToast({ icon: 'loading', modal: true }, TIMEOUT_MAX);\n      axios.post('/cashier/ajax/wallet', {\n        code: query.code,\n        password: password,\n      }, {\n        // 支付失败不希望触发全局的弹窗提醒\n        global: false,\n      }).then(() => {\n        this.handleFeedback('success');\n      }, () => {\n        this.handleFeedback('failure');\n      }).finally(actions.closeToast);\n    };\n\n    // 被冻结\n    if (wallet.status == 0) {\n      return actions.openToast({\n        icon: 'failure',\n        message: '账户已被冻结',\n      });\n    }\n    // 有密码\n    else if (wallet.status == 1) {\n      actions.openModal({\n        title: '请输入支付密码',\n        message: (\n          <div className=\"list compact wallet\">\n            <label className=\"item\">\n              <span className=\"label\">密码</span>\n              <div className=\"text\">\n                <input className=\"input\" type=\"password\" pattern=\"[0-9]*\" placeholder=\"请输入您的支付密码\" maxLength=\"6\" onChange={ e => password=e.target.value } />\n              </div>\n            </label>\n            <div className=\"item-divider\">\n              <div className=\"text text-center text-driving\">提醒: 您正在进行付款操作</div>\n            </div>\n          </div>),\n        buttons: [{\n          text: '取消',\n          onClick: actions.closeModal,\n        }, {\n          text: '确定',\n          onClick: () => {\n            // 空密码\n            if (!password) {\n              return actions.openToast({\n                icon: 'failure',\n                message: '请输入密码'\n              });\n            }\n            payment();\n            actions.closeModal();\n          },\n        }]\n      });\n    }\n    // 没密码\n    else if (wallet.status == 2) {\n      payment();\n    }\n  }\n\n  // 支付回调处理\n  handleFeedback(type) {\n    let { query } = this.state;\n    let { history } = this.props;\n    history.push({\n      pathname: payoff(query.business, type),\n      search: encodeQuery(query),\n    });\n  }\n\n  // 物业交费\n  handleOthers() {\n    let { actions, history } = this.props;\n    actions.openModal({\n      title: '物业前台',\n      message: '您需要前往物业中心当面支付',\n      buttons: [{\n        text: '其他方式',\n        onClick: actions.closeModal,\n      }, {\n        text: '查看订单',\n        onClick: () => {\n          actions.closeModal();\n          history.push('/account/orders');\n        },\n      }]\n    });\n  }\n\n  render() {\n    let { loading, list, wallet, query, lost } = this.state;\n    let { price } = query;\n    let { toast, modal } = this.props;\n    return (\n      <View className={style.home}>\n        <Header>\n          <a className=\"menu\" onClick={() => this.props.history.go(-1)}>\n            <i className=\"icon\">&#xe60e;</i>\n          </a>\n          <Title title=\"收银台\" />\n        </Header>\n\n        <Content>\n          {!loading && list.length === 0 &&\n            <div className=\"feedback\">\n              <div className=\"mark\">\n                <img width=\"197\" height=\"98\" src=\"//img1.qdingnet.com/c50aee1127e2b6a075250a6b26629bd2.png\" alt=\"空白\" />\n              </div>\n              <h3 className=\"title\">非常抱歉</h3>\n              <div className=\"describe\">您当前浏览器不支持支付<br />你可以使用微信或千丁APP访问</div>\n              <div className=\"vspace hspace\">\n                <a className=\"button default\" href=\"//dl.qdingnet.com\">下载千丁小区</a>\n              </div>\n            </div>\n          }\n          {list.length > 0 &&\n            <Aux>\n              <div className=\"hspace text-sm\" ui-mode=\"15px\">\n                <div className=\"vspace\" ui-mode=\"10px\">请选择支付方式</div>\n              </div>\n              {\n                list.map((item, idx) => {\n                  return (\n                    <div key={ idx } className=\"list\">\n                      {/* 钱包支付:已经禁用 */}\n                      {item.type === 61 && wallet.status == 0 &&\n                        <label className=\"item disabled\" ui-mode=\"15px\">\n                          <div className=\"avatar\">\n                            <img width=\"45\" height=\"45\" src={ item.icon } />\n                          </div>\n                          <span className=\"text\">\n                            <span className=\"text-darkgray\">{ item.name }<span className=\"text-gray text-sm\">（余额: { Filter.currency(item.value) }）</span></span>\n                            <div className=\"brief text-ellipsis\">\n                              <span className=\"text-gray\">{ wallet.statusTips || '提醒：钱包已被冻结，请联系客服' }</span>\n                            </div>\n                          </span>\n                        </label>\n                      }\n                      {/* 钱包支付:正常使用 */}\n                      {item.type === 61 && wallet.status == 1 &&\n                        <label className=\"item tapable forlab\" ui-mode=\"15px\">\n                          <div className=\"avatar\">\n                            <img width=\"45\" height=\"45\" src={ item.icon } />\n                          </div>\n                          <span className=\"text\">\n                            <span>{ item.name }<span className=\"text-driving text-sm\">（余额: { Filter.currency(item.value) }）</span></span>\n                            <div className=\"brief text-ellipsis\">{ item.desc }</div>\n                          </span>\n                          <input className=\"checkbox\" type=\"radio\" name=\"paytype\" checked={ item.defaultFlag } onChange={ this.handleChange.bind(this, item) } />\n                        </label>\n                      }\n                      {/* 其他支付 */}\n                      { item.type !== 61 &&\n                        <label className=\"item tapable forlab\" ui-mode=\"15px\">\n                          <div className=\"avatar\">\n                            <img width=\"45\" height=\"45\" src={ item.icon } />\n                          </div>\n                          <span className=\"text\">\n                            <span>{ item.name }</span>\n                            <div className=\"brief text-ellipsis\">{ item.desc }</div>\n                          </span>\n                          <input className=\"checkbox\" type=\"radio\" name=\"paytype\" checked={ item.defaultFlag } onChange={ this.handleChange.bind(this, item) } />\n                        </label>\n                      }\n                    </div>\n                  );\n                })\n              }\n            </Aux>\n          }\n        </Content>\n\n        {list.length > 0 &&\n          <Footer>\n            <div className=\"button-group compact\">\n              <button className=\"button literal square text-left\">应付: <span className=\"text-driving\">{ Filter.currency(price) }</span></button>\n              <button className=\"button driving square\" disabled={ lost } onClick={ this.handlePayment }>立即支付</button>\n            </div>\n          </Footer>\n        }\n\n        <Widgets>\n          <Modal {...modal} />\n          <Toast {...toast} />\n        </Widgets>\n      </View>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  ...state.modules.cashier.home,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(actions, dispatch),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cashier/home.jsx"],"sourceRoot":""}